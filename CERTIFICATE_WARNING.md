# Предупреждение о сертификате - Решение

## Почему появляется это предупреждение?

Вы видите это предупреждение, потому что используется **самоподписанный сертификат**. Браузеры не доверяют таким сертификатам по умолчанию - это нормально для тестирования.

## Как продолжить (для тестирования)

### В Chrome/Edge:
1. На странице с предупреждением нажмите **"Дополнительно"** (Advanced)
2. Нажмите **"Перейти на сайт 46.62.232.61 (небезопасно)"** (Proceed to 46.62.232.61 (unsafe))

### В Firefox:
1. Нажмите **"Дополнительно"** (Advanced)
2. Нажмите **"Принять риск и продолжить"** (Accept the Risk and Continue)

### В Safari:
1. Нажмите **"Показать подробности"** (Show Details)
2. Нажмите **"Посетить этот веб-сайт"** (Visit this website)

## ⚠️ ВАЖНО для Telegram Web App

**Telegram НЕ принимает самоподписанные сертификаты!**

Для работы Telegram Web App (`t.me/bronkomat_bot/Booking`) вам **обязательно** нужен доверенный сертификат от Let's Encrypt.

## Решение: Получить Let's Encrypt сертификат

### Требования:
- Доменное имя, указывающее на ваш сервер (46.62.232.61)
- Порты 80 и 18473 открыты в firewall

### Шаги на сервере:

```bash
# 1. Установите Certbot
sudo apt-get update
sudo apt-get install certbot

# 2. Остановите nginx временно (для получения сертификата)
docker compose stop nginx

# 3. Получите сертификат (замените yourdomain.com на ваш домен)
sudo certbot certonly --standalone -d yourdomain.com

# 4. Скопируйте сертификаты в проект
cd /var/www/room-booking
sudo cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem nginx/ssl/cert.pem
sudo cp /etc/letsencrypt/live/yourdomain.com/privkey.pem nginx/ssl/key.pem
sudo chmod 644 nginx/ssl/cert.pem
sudo chmod 600 nginx/ssl/key.pem

# 5. Запустите nginx обратно
docker compose start nginx

# 6. Настройте автоматическое обновление сертификата
sudo crontab -e
# Добавьте строку:
0 0 * * * certbot renew --quiet && cd /var/www/room-booking && docker compose restart nginx
```

### Если у вас нет домена:

1. **Купите домен** (например, на Namecheap, GoDaddy, или любом другом регистраторе)
2. **Настройте DNS A-запись**, указывающую на 46.62.232.61
3. **Подождите** пока DNS распространится (обычно 5-30 минут)
4. **Выполните шаги выше** с вашим доменом

## Альтернатива: Использовать Cloudflare

Если у вас есть домен, вы можете:
1. Настроить Cloudflare как прокси
2. Использовать их бесплатный SSL сертификат
3. Настроить Cloudflare на проксирование порта 18473

## Текущий статус

✅ HTTPS работает (с самоподписанным сертификатом)
✅ Можно тестировать в браузере (после принятия предупреждения)
❌ Telegram Web App не будет работать (нужен доверенный сертификат)

## Проверка работы

После получения Let's Encrypt сертификата:
- Браузер не будет показывать предупреждение
- Telegram Web App будет работать
- Сертификат будет автоматически обновляться

